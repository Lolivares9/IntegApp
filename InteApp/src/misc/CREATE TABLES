CREATE TABLE CLIENTES (
    ID_CLIENTE		INT					IDENTITY(1,1) NOT NULL,
	RAZON_SOCIAL	VARCHAR (50)		NOT NULL,
    CUIT			VARCHAR (50)		NOT NULL,
	DIRECCION		VARCHAR (50)		NOT NULL,
	LOCALIDAD		VARCHAR (50)		NOT NULL,
	MAIL			VARCHAR (50)		NOT NULL,
	TELEFONO		VARCHAR (50)		NOT NULL,
	TIPO_PERSONA	CHAR (1)			NOT NULL
	
	PRIMARY KEY (ID_CLIENTE)
);

CREATE TABLE RUBROS (
	ID_RUBRO				INT				IDENTITY(1,1) NOT NULL,	
	NOMBRE_RUBRO			VARCHAR(100)	NOT NULL,
	CONVENIO				VARCHAR(100)	NOT NULL
	
	PRIMARY KEY (ID_RUBRO)
);

CREATE TABLE ESCALAS (
	ID_ESCALA				INT 			IDENTITY(1,1) NOT NULL,
	ID_RUBRO				INT				,
	VIGENCIA_DESDE			DATE			NULL,
	VIGENCIA_HASTA			DATE			NULL
	
	PRIMARY KEY (ID_ESCALA)
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO)
);

CREATE TABLE CATEGORIAS (
	ID_CATEGORIA			INT 			IDENTITY(1,1) NOT NULL,
	CATEGORIA				VARCHAR(150)	NOT NULL,
	SUELDO					FLOAT			NOT NULL,
	ID_ESCALA				INT				
	
	PRIMARY KEY (ID_CATEGORIA)
	FOREIGN KEY (ID_ESCALA) REFERENCES ESCALAS (ID_ESCALA)
);

CREATE TABLE EMPLEADOS (
	ID_EMPLEADO			INT				IDENTITY(1,1) NOT NULL,
	ID_CLIENTE			INT				,
    CUIL				VARCHAR (50)	NOT NULL,
	ID_RUBRO			INT				,
	ID_CATEGORIA		INT				,
    NOMBRE				VARCHAR (50)	NOT NULL,
	APELLIDO			VARCHAR (50)	NOT NULL,
	DIRECCION			VARCHAR (50)	NOT NULL,
	MAIL				VARCHAR	(50)	NOT NULL,
	TELEFONO			VARCHAR (50)	NOT NULL,
	FECHA_INGRESO		DATE			NOT NULL,
	TIPO_LIQUIDACION	VARCHAR (50)	NOT NULL,
	FECHA_ULT_LIQ		DATE			NOT NULL,
	FECHA_PROX_LIQ		DATE			NOT NULL,
	VACACIONES_DISP		INT				NOT NULL,
	DIAS_EST_DISP		INT				NOT NULL,
	EN_CONVENIO			BIT				NOT NULL,
	SALARIO				FLOAT			NOT NULL
	
	
	PRIMARY KEY (ID_EMPLEADO)
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE),
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO),
	FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIAS (ID_CATEGORIA)
);

CREATE TABLE LIQUIDACIONES	 (
    ID_LIQUIDACION			INT				IDENTITY(1,1) NOT NULL,
	ID_EMPLEADO				INT				,
	FECHA_DESDE				DATE			NOT NULL,
	FECHA_HASTA				DATE			NOT NULL,
	LIQ_BRUTA				FLOAT			NOT NULL,
	LIQ_NETA				FLOAT			NOT NULL
	
	
	PRIMARY KEY (ID_LIQUIDACION)
	FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADOS (ID_EMPLEADO)
);

CREATE TABLE CONCEPTOS	(
	ID_CONCEPTO				INT				IDENTITY(1,1) NOT NULL,
	DESCRIPCION				VARCHAR(150)	NOT NULL,
	OBLIGATORIO				BIT				NOT NULL,
	SIGNO					CHAR(1)			NOT NULL			
	
	PRIMARY KEY (ID_CONCEPTO)
);

CREATE TABLE ITEM_RUBRO (
	ID_ITEM_RUBRO			INT				IDENTITY(1,1) NOT NULL,
	ID_RUBRO				INT				,
	ID_CONCEPTO				INT				,
	PORCENTAJE				FLOAT			NOT NULL,
	ID_LIQUIDACION			INT				
	
	PRIMARY KEY (ID_ITEM_RUBRO)
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO),
	FOREIGN KEY (ID_LIQUIDACION) REFERENCES LIQUIDACIONES (ID_LIQUIDACION),
	FOREIGN KEY (ID_CONCEPTO) REFERENCES CONCEPTOS (ID_CONCEPTO)
);

CREATE TABLE NOVEDADES	 (
    ID_NOVEDAD			INT				IDENTITY(1,1) NOT NULL,
	ID_EMPLEADO			INT				,
	FECHA_NOVEDAD		DATE			NOT NULL,
	ID_CONCEPTO			INT             ,
	UNIDADES			INT				NOT NULL
	
	PRIMARY KEY (ID_NOVEDAD)
	FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADOS (ID_EMPLEADO),
	FOREIGN KEY (ID_CONCEPTO) REFERENCES CONCEPTOS (ID_CONCEPTO)
);

CREATE TABLE FACTURAS	 (
    ID_FACTURA			INT				IDENTITY(1,1) NOT NULL,
	ID_CLIENTE			INT				NOT NULL,
	DESCRIPCION			VARCHAR(150)	NOT NULL,
	IMPORTE				FLOAT			NOT NULL
	
	PRIMARY KEY (ID_FACTURA)
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);

/*
DROP TABLE FACTURAS
DROP TABLE NOVEDADES
DROP TABLE ITEM_RUBRO
DROP TABLE CONCEPTOS
DROP TABLE LIQUIDACIONES
DROP TABLE EMPLEADOS
DROP TABLE CATEGORIAS
DROP TABLE ESCALAS
DROP TABLE RUBROS
DROP TABLE CLIENTES

*/

