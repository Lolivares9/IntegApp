CREATE TABLE CLIENTES (
    ID_CLIENTE		INT					IDENTITY(1,1) NOT NULL,
    CUIT			VARCHAR (50)		NOT NULL,
	DIRECCION		VARCHAR (50)		NOT NULL,
	RAZON_SOCIAL	VARCHAR (50)		NOT NULL,
	LOCALIDAD		VARCHAR (50)		NOT NULL,
	MAIL			VARCHAR (50)		NOT NULL,
	TELEFONO		VARCHAR (50)		NOT NULL,
	TIPO_PERSONA	CHAR (1)			NOT NULL
	
	PRIMARY KEY (ID_CLIENTE)
);

CREATE TABLE EMPLEADOS (
	ID_EMPLEADO			INT				IDENTITY(1,1) NOT NULL,
	ID_CLIENTE			INT				NOT NULL,
	ID_NOVEDAD			INT				NOT NULL,
    CUIL				VARCHAR (50)	NOT NULL,
    NOMBRE				VARCHAR (50)	NOT NULL,
	APELLIDO			VARCHAR (50)	NOT NULL,
	DIRECCION			VARCHAR (50)	NOT NULL,
	TELEFONO			VARCHAR (50)	NOT NULL,
	TIPO_LIQUIDACION	VARCHAR (50)	NOT NULL,
	VACACIONES_DISP		INT				NOT NULL,
	DIAS_EST_DISP		INT				NOT NULL,
	EN_CONVENIO			BIT				NOT NULL,
	RUBROS				VARCHAR(50)		NOT NULL,
	CATEGORIA			VARCHAR (50)	NOT NULL,
	SALARIO				FLOAT			NOT NULL
	
	
	PRIMARY KEY (ID_EMPLEADO)
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);

CREATE TABLE LIQUIDACIONES	 (
    ID_LIQUIDACION			INT				IDENTITY(1,1) NOT NULL,
	ID_EMPLEADO				INT				NOT NULL,
	FECHA_DESDE				DATE			NOT NULL,
	FECHA_HASTA				DATE			NOT NULL,
	LIQ_BRUTA				FLOAT			NOT NULL,
	LIQ_NETA				FLOAT			NOT NULL
	
	
	PRIMARY KEY (ID_LIQUIDACION)
	FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADOS (ID_EMPLEADO)
);

CREATE TABLE RUBROS (
	ID_RUBRO				INT				IDENTITY(1,1) NOT NULL,	
	NOMBRE_RUBRO			VARCHAR(100)	NOT NULL,
	
	PRIMARY KEY (ID_RUBRO)
);

CREATE TABLE CONCEPTOS	(
	ID_CONCEPTO				INT				IDENTITY(1,1) NOT NULL,
	DESCRIPCION				VARCHAR(150)	NOT NULL,
	OBLIGATORIO				BIT				NOT NULL,
	ID_LIQUIDACION		INT				NOT NULL,
	SIGNO					CHAR(1)			NOT NULL,
	ID_RUBRO				INT				NOT NULL
	
	PRIMARY KEY (ID_CONCEPTO)
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO),
	FOREIGN KEY (ID_LIQUIDACION) REFERENCES LIQUIDACIONES (ID_LIQUIDACION)
);

CREATE TABLE NOVEDADES	 (
    ID_NOVEDAD			INT				IDENTITY(1,1) NOT NULL,
	ID_EMPLEADO			INT				NOT NULL,
	ID_LIQUIDACION		INT				NOT NULL,
	FECHA_NOVEDAD		DATE			NOT NULL,
	ID_CONCEPTO			INT             NOT NULL,
	CANT_DIAS			INT				NOT NULL
	
	PRIMARY KEY (ID_NOVEDAD)
	FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADOS (ID_EMPLEADO),
	FOREIGN KEY (ID_CONCEPTO) REFERENCES CONCEPTOS (ID_CONCEPTO),
	FOREIGN KEY (ID_LIQUIDACION) REFERENCES LIQUIDACIONES (ID_LIQUIDACION)
);

CREATE TABLE ITEM_RUBRO (
	ID_ITEM_RUBRO			INT				IDENTITY(1,1) NOT NULL,
	ID_RUBRO				INT				NOT NULL,
	ID_CONCEPTO				INT				NOT NULL
	
	
	PRIMARY KEY (ID_ITEM_RUBRO)
	FOREIGN KEY (ID_CONCEPTO) REFERENCES CONCEPTOS (ID_CONCEPTO),
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO)
);


/*
CREATE TABLE CONCEPTO_RUBRO (
	ID_CONCEPTO_RUBRO		INT				IDENTITY(1,1) NOT NULL,
	ID_RUBRO				INT				NOT NULL,
	ID_CONCEPTO				INT				NOT NULL,
	PORCENTAJE				FLOAT			NOT NULL,
	OBLIGATORIO				BIT				NOT NULL
	
	PRIMARY KEY (ID_CONCEPTO_RUBRO)
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO),
	FOREIGN KEY (ID_CONCEPTO) REFERENCES CONCEPTOS (ID_CONCEPTO)
);
CREATE TABLE SUELDO_RUBRO (
	ID_SUELDO_RUBRO			INT				IDENTITY(1,1) NOT NULL,
	ID_RUBRO				INT				NOT NULL,
	CATEGORIA				VARCHAR(100)	NOT NULL,
	SUELDO					FLOAT			NOT NULL
	
	PRIMARY KEY (ID_SUELDO_RUBRO)
	FOREIGN KEY (ID_RUBRO) REFERENCES RUBROS (ID_RUBRO)
);
*/

CREATE TABLE FACTURAS	 (
    ID_FACTURA			INT				IDENTITY(1,1) NOT NULL,
	ID_CLIENTE			INT				NOT NULL,
	DESCRIPCION			VARCHAR(150)	NOT NULL,
	IMPORTE				FLOAT			NOT NULL
	
	PRIMARY KEY (ID_FACTURA)
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);

CREATE TABLE ESCALAS (
	ID_ESCALA				INT 			IDENTITY(1,1) NOT NULL,
	VIGENCIA_DESDE			DATE			NULL,
	VIGENCIA_HASTA			DATE			NULL
	
	PRIMARY KEY (ID_ESCALA)
)

CREATE TABLE CATEGORIAS (
	ID_CATEGORIA			INT 			IDENTITY(1,1) NOT NULL,
	CATEGORIA				VARCHAR(150)	NOT NULL,
	SUELDO					FLOAT			NOT NULL,
	ID_ESCALA				INT				NOT NULL
	
	PRIMARY KEY (ID_CATEGORIA)
	FOREIGN KEY (ID_ESCALA) REFERENCES ESCALAS (ID_ESCALA)
);


-----------------------------------------------------------------------



















/*
DROP LIQUIDACIONES
DROP FACTURAS
DROP TABLE NOVEDADES
DROP TABLE FACTURA
DROP TABLE EMPLEADOS
DROP TABLE CLIENTES

*/

